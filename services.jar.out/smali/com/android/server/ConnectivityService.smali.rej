diff a/services.jar.out/smali/com/android/server/ConnectivityService.smali b/services.jar.out/smali/com/android/server/ConnectivityService.smali	(rejected hunks)
@@ -7281,6 +7287,11 @@
     move-result v11
 
     .local v11, usedNetworkType:I
+
+    move-object/from16 v0, p1
+
+    invoke-static {v0, v11}, Lcom/android/server/ConnectivityService$Injector;->stopUsingNetworkFeature(Lcom/android/server/ConnectivityService$FeatureUser;I)V
+
     move-object/from16 v0, p0
 
     iget-object v13, v0, Lcom/android/server/ConnectivityService;->mNetTrackers:[Landroid/net/NetworkStateTracker;
@@ -12225,9 +12236,11 @@
     :try_end_8
     .catchall {:try_start_8 .. :try_end_8} :catchall_2
 
+    :try_start_9
+    invoke-static/range {v23 .. v23}, Lcom/android/server/ConnectivityService$Injector;->startUsingNetworkFeature(I)V
+
     if-ltz v15, :cond_f
 
-    :try_start_9
     move-object/from16 v0, p0
 
     iget-object v0, v0, Lcom/android/server/ConnectivityService;->mHandler:Landroid/os/Handler;
